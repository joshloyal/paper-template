% optimization
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

% various delimiters / bracketing operations
\DeclarePairedDelimiter\parentheses{\lparen}{\rparen}
\DeclarePairedDelimiter\brackets{\lbrack}{\rbrack}
\DeclarePairedDelimiter\set{\{}{\}}
\DeclarePairedDelimiterX{\norm}[1]{\lVert}{\rVert}{#1}
\DeclarePairedDelimiterX{\abs}[1]{\lvert}{\rvert}{#1}
\newcommand{\spn}[1]{\text{span}\parentheses*{#1}}

% expectation bracketing
\DeclarePairedDelimiterX{\expectarg}[1]{[}{]}{%
    \ifnum\currentgrouptype=16 \else\begingroup\fi
    \activatebar#1
    \ifnum\currentgrouptype=16 \else\endgroup\fi
}

% variance bracketing
\DeclarePairedDelimiterX{\variancearg}[1]{(}{)}{%
    \ifnum\currentgrouptype=16 \else\begingroup\fi
    \activatebar#1
    \ifnum\currentgrouptype=16 \else\endgroup\fi
}

% conditional bar conditional expectation / variance
\newcommand{\innermid}{\nonscript\;\delimsize\vert\nonscript\;}
\newcommand{\activatebar}{%
    \begingroup\lccode`\~=`\|
    \lowercase{\endgroup\let~}\innermid
    \mathcode`|=\string"8000
}

% probability
\newcommand{\Prob}{P \, \variancearg}
\newcommand{\E}{\mathbb{E} \, \expectarg}
\newcommand{\Var}{\operatorname{Var}\variancearg}
\newcommand{\Cov}{\operatorname{Cov}\variancearg}
\newcommand\independent{\protect\mathpalette{\protect\independenT}{\perp}}

% indicator function
\def\mOne{{\mathbbm{1}}}
\newcommand{\ind}[1]{\mOne_{\{#1\}}}
\newcommand{\indc}[1]{\mOne_{\{#1\}^c}}

% linear algebra
\newcommand{\Reals}[1]{\mathbb{R}^{#1}}

% dataset
\newcommand{\dataset}{\mathcal{D}_n}

% bold symbols
\newcommand{\Y}{\mathbf{Y}}
\newcommand{\bY}{\mathbf{Y}}
\newcommand{\by}{\mathbf{y}}
\newcommand{\X}{\mathbf{X}}
\newcommand{\bX}{\mathbf{X}}
\newcommand{\bx}{\mathbf{x}}
\newcommand{\bZ}{\mathbf{Z}}
\newcommand{\bz}{\mathbf{z}}
\newcommand{\bW}{\mathbf{W}}
\newcommand{\bU}{\mathbf{U}}
\newcommand{\bd}{\mathbf{d}}
\newcommand{\bpi}{\boldsymbol\pi}
\newcommand{\bbeta}{\boldsymbol\beta}
\newcommand{\btheta}{\boldsymbol\theta}
\newcommand{\blambda}{\boldsymbol\lambda}
\newcommand{\bdelta}{\boldsymbol\delta}
\newcommand{\bphi}{\boldsymbol\phi}
\newcommand{\bmu}{\boldsymbol\mu}
\newcommand{\bpsi}{\boldsymbol\psi}
\newcommand{\boldm}{\mathbf{m}}
\newcommand{\bolds}{\mathbf{s}}
\newcommand{\boldw}{\mathbf{w}}
\newcommand{\boldmbar}{\mathbf{\bar{m}}}
\newcommand{\boldmubar}{\bar{\bmu}}
